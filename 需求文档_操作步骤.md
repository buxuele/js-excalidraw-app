
## 如何写需求文档

```
对目前我们已经完成的 app  ， 我们现在来总结经验， 方便下次更好地提出问题。

- 假如时间可以重来，
- 我从一开始就写一份完整的说明文档，详细描述我的需求和要求，你根据这个文档来提供代码，一次性就能实现现在这个效果。
- 那么这个需求文档应该怎么写， 请回顾聊天历史，帮我写一下。

```

你问的，其实是所有项目开发中最核心、也最容易被忽略的问题：“**我们如何从一开始就对准目标，避免在迷雾中反复试错？**”

“假如时间可以重来”，这句话太有分量了。这不仅仅是总结经验，这是在为我们未来的所有合作，打造一个坚不可摧的沟通桥梁。

下面，我就以我们这次的合作为蓝本，为你起草一份——如果我们在第一天就有——就能一次性成功的项目需求文档 (PRD - Product Requirements Document)。

---

### **项目需求文档 (PRD): 多页式 Excalidraw 增强应用 V1.0**

**文档目的**：本文档旨在清晰、完整地定义“多页式 Excalidraw 增强应用”第一版的核心功能、交互设计及技术要求，作为开发工作的唯一依据，确保我们从一开始就目标一致，高效地完成开发。真兄弟，把话说在前面，不搞虚的。

#### **1. 项目愿景 (The "Why")**

Excalidraw 是一个顶级白板工具，但其官方免费版“一次只能处理一个页面”的限制，严重阻碍了用户进行复杂项目构思和多主题思路整理。本项目旨在**解放 Excalidraw 的核心绘图能力**，通过提供一个强大的、本地化的多页面管理“外壳”，让用户能够在一个应用内，流畅地组织和管理无限个绘图画布。

#### **2. 核心问题 (The Problem)**

*   用户无法方便地创建和切换多个绘图，项目一多就得开一堆浏览器标签页。
*   所有绘图混杂在本地存储中，没有清晰的列表和管理界面。
*   缺乏对单个绘图的命名和组织能力。

#### **3. 目标用户**

重度依赖 Excalidraw 进行头脑风暴、架构设计、流程梳理的个人用户，如程序员、产品经理、设计师、学生等。

#### **4. 功能性需求 (The "What")**

**4.1. 页面管理系统 (核心)**

*   **4.1.1. 侧边栏列表**：应用主界面应为左右布局。左侧是一个常驻的、可收起的侧边栏，用于展示所有绘图页面列表。
*   **4.1.2. 创建页面**：侧边栏顶部需有一个醒目的“+ 新建页面”按钮。
    *   点击后，一个新的、名为“新草稿”的空白页面被创建。
    *   **排序规则**：新创建的页面**必须**出现在页面列表的最顶部。
    *   新页面被创建后，应用应自动切换到该页面。
*   **4.1.3. 切换页面**：用户单击侧边栏中的任意页面按钮，右侧的绘图区应立即加载并显示对应页面的内容。当前活动页面在侧边栏中应有高亮状态（如不同的背景色和边框）。
*   **4.1.4. 重命名页面**：
    *   交互方式：**用户双击**侧边栏中的页面名称，该名称区域应变为一个可编辑的输入框。
    *   实现细节：输入框应自动聚焦，用户输入新名称后，按 `Enter` 键或当输入框失去焦点时，完成重命名。
*   **4.1.5. 删除页面**：
    *   交互方式：**用户右键点击**侧边栏中的任意页面按钮，应在鼠标位置弹出一个自定义上下文菜单。
    *   菜单内容：菜单中必须包含“删除页面”选项（文字用红色以示警告）。
    *   实现细节：点击“删除页面”后，必须弹出一个系统确认框（如 `window.confirm`），提示“确定要永久删除吗？”。用户确认后，该页面才被彻底删除。

**4.2. 数据持久化**

*   应用**必须**将用户的全部页面（包括名称和绘图内容）数据存储在浏览器的 IndexedDB 中。
*   当用户进行任何更改（创建、绘图、重命名、删除）后，数据应被自动、可靠地保存。
*   **核心要求**：用户刷新浏览器、关闭标签页或重启浏览器后，所有工作内容都应被完美地恢复到上次的状态。

**4.3. UI 与交互**

*   **4.3.1. 可收起的侧边栏**：
    *   在侧边栏顶部的“我的页面”标题右侧，**必须**提供一个尺寸较大、易于点击的开关按钮。
    *   点击该按钮，侧边栏应带有平滑的动画效果收起/展开。
    *   当侧边栏收起时，该开关按钮应悬浮在主绘图区的左上角，以便用户重新展开。
*   **4.3.2. 界面整洁**：侧边栏的页面按钮，无论其名称长短或为空，**必须**保持统一的高度，确保列表整齐美观。

#### **5. 非功能性需求 (The "How Well")**

*   **性能**：应用启动和页面切换应足够快，无明显卡顿。绘图时的保存操作不能阻塞 UI 线程。
*   **易用性**：所有核心交互（双击、右键）应符合直觉，无需用户阅读说明文档。

#### **6. 技术栈建议**

*   **前端框架**: React
*   **构建工具**: Vite
*   **编程语言**: JavaScript (为快速原型开发，暂不使用 TypeScript)
*   **本地存储**: IndexedDB，通过 `idb` 库进行封装。

#### **7. 明确排除范围 (V1.0 不做什么)**

为了聚焦核心价值，以下功能在第一版中**不予考虑**：
*   版本快照与历史记录恢复功能。
*   任何形式的云同步、用户账户系统和后端服务。
*   分享功能（无论是只读链接还是协作链接）。
*   页面搜索、文件夹归类等高级组织功能。
*   导出为图片或其他文件格式的功能。


